{ config, pkgs, lib, ... }:

{
  networking.networkmanager.enable = true;

  time.timeZone = "Asia/Ho_Chi_Minh";

  i18n.defaultLocale = "en_US.UTF-8";

  # ÉP danh sách locale để tránh module khác “đẻ” vi_VN vào và làm glibc-locales fail
  i18n.supportedLocales = lib.mkForce [
    "en_US.UTF-8/UTF-8"
  ];

  hardware.bluetooth = {
    enable = true;
    powerOnBoot = true;
  };

  services.blueman.enable = true;

  i18n.inputMethod = {
    type = "fcitx5";
    fcitx5.addons = with pkgs; [
      qt6Packages.fcitx5-unikey
      fcitx5-gtk
    ];
  };
  
  systemd.user.services.fcitx5 = {
  enable = true;
  description = "Fcitx5 Input Method";
  wantedBy = [ "graphical-session.target" ];
  serviceConfig = {
    ExecStart = "${pkgs.fcitx5}/bin/fcitx5 -d";
    Restart = "on-failure";
    RestartSec = 2;
    };
  };

 
  environment.systemPackages = with pkgs; [
    bluez
    kdePackages.bluedevil
  ];
}
